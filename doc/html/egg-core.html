<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<meta content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content=
"Mozilla/4.7 [en] (WinNT; U) [Netscape]">
<title>Eggdrop Documentation: Eggdrop Core</title>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#3333FF" vlink="#3333FF"
alink="#3333FF">
<font face="Arial, Helvetica" size="-1"><b><font color="#FF0000">
Eggdrop Core</font></b></font> 

<hr>
<font face="Arial, Helvetica" size="-1">This is an exhaustive list of
all the Tcl commands added to eggdrop. All of the normal Tcl built-in
commands are still there, of course. But you can also use these to
manipulate features of the bot. Please see the module files for TCL
commands relating to each module.</font> 

<p><font face="Arial, Helvetica" size="-1"><b>NOTICE:</b> This list
is accurate for the v1.5 series of eggdrop!</font></p>

<p><b><font face="Arial, Helvetica" size="-1">SCRIPTS WHICH WERE
WRITTEN FOR EARLIER VERSIONS WILL PROBABLY NOT WORK WITHOUT
MODIFICATION. ALTHOUGH SOME CAN BE MADE TO WORK USING THE COMPAT.TCL
DISTRIBUTED WITH EGGDROP.</font></b></p>

<hr>
<b><font face="Arial, Helvetica" size="-1">Sections:</font></b> 

<blockquote><b><font face="Arial, Helvetica" color="#FF0000" size=
"-1">Core Eggdrop Commands</font></b> 

<blockquote>
<ul>
<li><a href="#config"><font face="Arial, Helvetica" size="-1">Core configuration
settings</font></a></li>

<li><a href="#Core-Output"><font face="Arial, Helvetica" size="-1">
Output Commands</font></a></li>

<li><a href="#Core-UserRec"><font face="Arial, Helvetica" size="-1">
User Record Manipulation Commands</font></a></li>

<li><a href="#Core-Channel"><font face="Arial, Helvetica" size="-1">
Channel Commands</font></a></li>

<li><a href="#Core-DCC"><font face="Arial, Helvetica" size="-1">DCC
Commands</font></a></li>

<li><a href="#Core-Misc"><font face="Arial, Helvetica" size="-1">
Miscellaneous Commands</font></a></li>

<li><a href="#Core-GlobalVars"><font face="Arial, Helvetica" size=
"-1">Global Variables</font></a></li>

<li><a href="#Core-CommandExt"><font face="Arial, Helvetica" size=
"-1">Command Extension</font></a></li>

<li><a href="#Core-ReturnV"><font face="Arial, Helvetica" size="-1">
Return Values</font></a></li>

<li><a href="#Core-Match"><font face="Arial, Helvetica" size="-1">
Match Characters</font></a></li>
</ul>
</blockquote>
</blockquote>

<a name="config"></a> <br>
<hr width="100%">
<br>
<b><font face="Arial,Helvetica" color="#FF0000" size=
"-1">CORE CONFIG FILE SETTINGS</font></b><br><br>
<p><font face="Arial,Helvetica" size=-1>Lines in bold are the lines
that should be included in the eggdrop config file.<br>
Lines in bold italics are ptional and only required if you wish to change the default behaviour
for that particular feature.</font><br><br>
<blockquote>
<font face="Arial,Helvetica" color="#FF0000" size="-1" >
##### EGGDROP CORE SETTINGS #####</font><br>
<font face="Arial,Helvetica" color="#000000" size="-1" >
<br>
The first line in eggdrop configuration file should contain a full qualified
path to eggdrop executable. It has to be implemented in the way the example
shows to make the config file work as a shell script<br>
Example:<br><br>
#! /path/to/eggdrop<br><br>
<font color="#ff0000">##### BASIC STUFF #####</font><br>
<br>
You can change the basic eggdrop appearence and behaviour in this section.<br>
<br>

<b><i>set username "lamest"</i></b><br>
<blockquote>
This setting defines the username the bot uses.<br>
Note that this setting is working only if no ident daemon is running on
the machine your bot is on
</blockquote>

<b>set admin "Lamer <email: lamer@lamest.lame.org>"</b>
<blockquote>
    This setting defines which contact person should be shown in .status,
    /msg help and other places. You really should include this info.
</blockquote>

<b><i>set network "SomeIrcNetwork"</i></b>
<blockquote>
    This setting is used only for info to share with others on your botnet
</blockquote>

<b>set timezone "EST"</b>
<blockquote>This setting defines the timezone is your bot in. It's used for internal
    routines as well as for logfile timestamping or scripting purposes.
    The timezone string specifies the name of the timezone and must be three
    or more alphabetic characters.<br>
    ex. Central European Time(UTC+1) could be "CET"
</blockquote>

<b><i>set offset "5"</i></b>
<blockquote>
    offset specifies the time value to be added to the local time to get
    Coordinated Universal Time (UTC aka GMT). The offset is positive if the
    local timezone is west of the Prime Meridian and negative if it is east.
    The value(hours) must be between 0 and 24<br>
    ex. if the timezone is UTC+1 the offset is -1
</blockquote>

<b><i>set env(TZ) "$timezone $offset" (disabled by default)</i></b>
<blockquote>    If you dont want to use the timezone setting for scripting purpose only
    but instead everywhere possible then use this setting.
</blockquote>

<b><i>addlang "english"</i></b>
<blockquote>
    if you want to have your eggdrop messages displayed in another language
    change the below command to match your preferences. An alternative would
    be to set the environment variabel EGG_LANG to that value.
</blockquote>

<br>
<font color="#ff0000">##### LOG FILES #####</font><br><br>

Eggdrop is capable of logging various stuff, from channel chatter to
commands people use on the bot or file transfers.<br><br>

Logfiles are kept normaly for 24 hours. Afterwards they'll be renamed
to "(logfilename).yesterday". After 48 hours they'll get overwritten by the
logfile of the next day.<br>
<br>

<b>set max-logs 5</b>
<blockquote>maximum number of logfiles to allow - this can be increased if needed<br>
    <b>(don't decrease this)</b>
</blockquote>

<b><i>set max-logsize 0</i></b>
<blockquote>
    maximum size of your logfiles, set this to 0 to disable.
    This value is in KiloBytes, so '550' would mean cycle logs when it
    reaches the size of 550 KiloBytes.<br>
    Note that this only works if you have keep-all-logs 0 (OFF)
</blockquote>

<b><i>set quick-logs 0</i></b>
<blockquote>
    Defaultly eggdrop writes every 5 minutes its logfiles to disk. You can
    change this behaviour by turning this setting to 1 (ON). Eggdrop will
    write and check the logfiles for size every minute.<br>
    Note that this setting might increase the cpu usage of your bot (on the
    other hand it will decrease your mem usage)
</blockquote>

<b>logfile <logflags> <channel> "logs/logfile"</b>
<blockquote>
    This setting actually tells the bot what should be loged from where in
    which file. (duh!).<br>

    The most common log file flags are:<br>
	<blockquote>
      m  private msgs/ctcps to the bot<br>
      k  kicks, bans, mode changes on the channel<br>
      j  joins, parts, netsplits on the channel<br>
      p  public chatter on the channel<br>
      s  server connects/disconnects/notices<br>
      b  information about bot linking and userfile sharing<br>
      c  commands people use (via msg or dcc)<br>
      x  file transfers and file-area commands<br>
	  r  (if use-console-r enabled) EVERYTHING sent to the bot by the server<br>
      o  other: misc info, errors -- IMPORTANT STUFF<br>
      w  wallops: msgs between IRCops (be sure to set the bot +w in init-server)<br>
	  </blockquote>
    There are others, but you probably shouldnt log them, it'd be
    rather unethical ;). There are also five user-defined levels ('1'..'5') which
    are used by Tcl scripts.<br><br>
    Each logfile belongs to a certain channel. Events of type 'k', 'j', and 'p'
    are logged to whatever channel they happened on. Most other events are
    currently logged to every channel. You can make a logfile belong to all
    channels by assigning it to channel "*". 
<br><br>
    Examples:<br>
<br>
    <b>logfile mco * "logs/eggdrop.log"<br>
    logfile jpk #lamest "logs/lamest.log"<br></b>
<br>
    In 'eggdrop.log' put private msgs/ctcps, commands, misc info, and errors
    from any channel<br>
    In 'lame.log' put joins, parts, kicks, bans, public chatter and mode changes
    from #lamest<br>
</blockquote>

<b><i>set log-time 1</i></b>
<blockquote>
    Use this feature to timestamp entries in the log file.<br>
    Valid settings are 0 for OFF and 1 ON.
</blockquote>

<b>set keep-all-logs 0</b>
<blockquote>
    If you want to keep your logfiles forever turn this setting on. All
    logfiles will get suffix ".[day, 2 digits][month, 3 letters][year, 4 digits]"
    Note that your quota might get full by this, so check your logfiles often and
    download them.<br>
    Valid settings are 0 for OFF and 1 ON.
</blockquote>

<b>set switch-logfiles-at 300</b>
<blockquote>
    You can specify in this setting, when eggdrop should switch the logfiles
    and started fresh.<br>
    You have to use military time in here. 300 is default and describes 00:00.<br>
    Note that a leading 0 will make Tcl think this is an octal value,
    something you probably don't want.
</blockquote>

<b><i>set quiet-save 0</i></b>
<blockquote>
    Those nasty "Writing user file..." and "Writing channel file ..." messages
    wont be logged anymore if this option is enabled.<br>
    Valid settings are 0 for OFF and 1 ON.
</blockquote>


<font color="#ff0000">##### FILES AND DIRECTORIES #####</font> <br>
<br>
<b>set userfile "LamestBot.user"</b>
<blockquote>
    Specify here how your userfile should be called
</blockquote>

<b><i>set sort-users 0</i></b>
<blockquote>
    If  you want your userfile to be sorted on save, turn this feature on.<br>
    Note that this takes a bit more cpu<br>
    Valid settings are 0 for OFF and 1 ON.
</blockquote>	

<b>set help-path "help/"</b>
<blockquote>
    Specify here where eggdrop should look for help files.
    Don't modify this setting until you know what you're doing!
</blockquote>

<b>set temp-path "/tmp"</b>
<blockquote>
    Set here a place to store temporarily files
</blockquote>

<b>set motd "text/motd"</b>
<blockquote>
    The MOTD (motto of the day) is displayed when people dcc chat or telnet
    to the bot.<br>
    Look into doc/settings.motd or type '.help set motd' in DCC CHAT or
    telnet connection for options.
</blockquote>

<b>set telnet-banner "text/banner"</b>
<blockquote>
    This banner will be displayed on telnet connections
</blockquote>

<b>set userfile-perm 0600</b>
<blockquote>
    Specifies what permissions the user, channel and notes (if notes module
    is loaded) files should be set to.<br>
    The octal values are the same as for the chmod system command.<br>
<br>
    To remind you: <br>
<pre>
           u  g  o           u  g  o           u  g  o
     0600  rw-------   0400  r--------   0200  -w-------    u - user
     0660  rw-rw----   0440  r--r-----   0220  -w--w----    g - group
     0666  rw-rw-rw-   0444  r--r--r--   0222  -w--w--w-    o - others
</pre>
    Note that the default 0600 is the most secure one and should only be
    changed if you need your files for shell scripting or other external
    applications.
</blockquote>

<b>set mod-path "modules/"</b>
<blockquote>
    This path specifies the path were eggdrop should look for its modules
</blockquote>


<font color="#ff0000">##### BOTNET, DCC AND NETWORK #####</font><br>
<br>
Settings in this section should be unimportant fur you until you deal
with botnets (multiple eggdrops conected together to maximize efficency).
You should read doc/BOTNET before modifying these settings.<br>
<br>

<b><i>set botnet-nick "LlamaBot"</i></b> (disabled by default)
<blockquote>
    If you want to use a differnt nickname on the botnet than you use on
    IRC (i.e. if you're in an untrusted botnet) set it here.
</blockquote>

<b>listen <port> <mode></b>
<blockquote>
    The listen command opens a telnet port by which you or other bots can
    interact with the eggdrop by telneting in. <br>
<br>
    Valid ports are (as long as you aren't root) >1024.<br>
    Valid modes are 'all', 'bots' and 'users'. You can assign special ports
    for users and bots, or one for all.<br>
<br>
    Examples:<br>
<blockquote>
    <b>listen 3333 bots
    listen 4444 users</b>
</blockquote>
    or:
<blockquote>
    <b>listen 3333 all</b>
</blockquote>
    There are more options for the listen command in doc/tcl-commands.doc<br>
    Note, if you are running more than one bot on the same machine, you will
    want to space the telnet ports at LEAST 5 apart... 10 is even better
</blockquote>

<b><i>set remote-boots 2</i></b>
<blockquote>
    This setting defines if people can boot users on the eggdrop from other
    bots in your botnet. Valid settings are:
	<blockquote>
     0 - allow *no* outside boots<br>
     1 - allow boots from sharebots<br>
     2 - allow any boots
	 </blockquote>
</blockquote>

<b><i>set share-unlinks 1</i></b>
<blockquote>
    This setting prohibits eggdrop to unlink from share bots if an remote bots
    tells so.
	</blockquote>


<b>set telnet-flood 5:60</b>
<blockquote>
    Define here how many telnet connection attempt in how many seconds from
    the same host constitute a flood.<br>
    Attempts:Seconds
</blockquote>

<b><i>set paranoid-telnet-flood 1</i></b>
<blockquote>
    If you telnet-flood to apply even to +f users, set this setting to 1<br>
    Valid settings are 0 for OFF and 1 ON.
</blockquote>

<b>set open-telnets 0</b>
<blockquote>
    If you want people allow to telnet in and type 'NEW' to become a new user,
    set this to 1. This is similar to 'hello' <br>
    Valid settings are 0 for OFF and 1 ON.
	</blockquote>

<b>set protect-telnet 0</b>
<blockquote>
    This setting will drop telnet connections not matching a known host. It
    greatly improves protection from IRCOPs, but makes it impossible for NOIRC
    bots to add hosts or have NEW as a valid login.<br>
    Valid settings are 0 for OFF and 1 ON.
</blockquote>

<b><i>set stealth-telnets 0</i></b>
<blockquote>
    If you don't want eggdrop to identify itself on a telnet connection, set
    this setting to 1. Eggdrop will display its nickname instead.<br>
    Valid settings are 0 for OFF and 1 ON.
</blockquote>

<b><i>set use-telnet-banner 0</i></b>
<blockquote>
    If you want eggdrop to display a banner when telneting in set this setting
    to 1. The telnet banner is set by 'telnet-banner'.
</blockquote>

<b>set dcc-sanitycheck 1</b>
<blockquote>
    This setting will make the bot ignore DCC chat requests which appear to
    have bogus information on the grounds that the user may have been trying
    to make the bot connect to somewhere that will get it into trouble, or
    that the user has a broken client (like mIRC tends to do), in which case
    the connect wouldn't work anyway.  It's suggested that you turn this on.<br>
    Valid settings are 0 for OFF and 1 ON.
</blockquote>

<b><i>set quiet-reject 1</i></b>
<blockquote>
    If turned to 1, the bot will squelch the error message when rejecting a
    DCC CHAT or SEND.<br>
    Normally eggdrop tells the DCC user that the CHAT or SEND has been
    rejected because they don't have access, but sometimes IRC server
    operators detect bots that way.
</blockquote>

<b>set max-dcc 50</b>
<blockquote>
    Set here the maximum number of dcc connections you will allow - you can
    increase this later, but never decrease it.
</blockquote>

<b><i>set require-p 0</i></b>
<blockquote>
    Define here if +o user still need the +p flag to dcc the bot.<br>
    Valid settings are 0 for OFF and 1 ON.
</blockquote>

<b>set dcc-flood-thr 3</b>
<blockquote>
    Specify here the number of lines from a user on the partyline (dcc, telnet)
    before they are considered to be flooding (and therefore get booted)
</blockquote>

<b>set resolve-timeout 15</b>
<blockquote>
    Set here the amount of seconds before giving up on hostname/address
    lookup. (you might want to increase this if you are on a slow network).
</blockquote>

<b>set ident-timeout 5</b>
<blockquote>
    Set a timeout in seconds how long to wait on ident-lookups
</blockquote>

<b>set connect-timeout 15</b>
<blockquote>
    This settings defines a timeout in seconds how long the bot should wait for
    a dcc chat, telnet, relay, etc connection.
</blockquote>

<i><b>set my-hostname "virtual.host.com"<br>
set my-ip "99.99.0.0"
</i></b>
<blockquote>
    If you're using virtual hosting (your machine has more than 1 IP), you
    may want to specify the particular IP to bind to. You can specify either
    by hostname or by IP. You may also want to set the hostname here if
    eggdrop has trouble detecting it when it starts up.
</blockquote>

<b><i>set firewall "host:port"</i></b>
<blockquote>
    Set this to your socks host if your eggdrop sits behind a firewall <br>
<br>
    Example:<br>

    <b>set firewall "proxy:178"</b> <br>
    <br>
    If you use a Sun "telnet passthru" firewall, use this setting:
	<br>
    Example:<br>
<br>
    <b>set firewall "!sun-barr.ebay:3666"</b> <br>
</blockquote>

<b><i>set nat-ip "127.0.0.1"</i></b>
<blockquote>
    If you have a NAT firewall (you box has an IP in one of the following
    ranges: 192.168.0.0-192.168.255.255, 172.16.0.0-172.31.255.255,
    10.0.0.0-10.255.255.255 and your firewall transparently changes your
    address to a unique address for your box.) or you have IP masquerading
    between you and the rest of the world, and /dcc chat,/ctcp chat or
    userfile shareing aren't working. Enter your outside IP here.<br>
    Do not enter anything for my-ip or my-hostname if you use this setting.
</blockquote>

<b><i>set reserved-port 9076</i></b>
<blockquote>
    If you want all your dcc connections bound to one specific port, set
    it here.<br>
    Note that this setting limits your dcc connections to pretty one at time.
</blockquote>

<b><i>set dcc-portrange 1024:65535</i></b>
<blockquote>
    This setting is so that people can't send fake ports to your bot when
    they try to dcc it. irc clients should never use a port below 1024 and
    well 65535 is the highest port possible. this setting is used for telnet
    too.
</blockquote>

<b><i>set dupwait-timeout 5</i></b>
<blockquote>
    If your eggdrop rejects bots that actually have already disconnected from
    another hub, but the disconnect information has not yet spread over the
    botnet due to lag, use this setting.<br>
    The bot will wait dupwait-timeout seconds before it checks again and then
    finally reject the bot.
</blockquote>


<font color="#ff0000">##### CONSOLE #####</font><br>
<br>
<b>set console "mkcobxs"</b>
<blockquote>
    This is the default console mode. It uses the same event flags as the log
    files do.<br>
    Note that the console channel is automatically set to your "primary" channel
    (the one you defined first in config file)<br>
    Masters can change their console channel and modes with the '.console' command
</blockquote>


<font color="#ff0000">##### COMMON STUFF #####</font> <br>
<br>
<b>set ignore-time 15</b>
<blockquote>
    Set the time in minutes how long temp. ignores should last
</blockquote>

<b>set hourly-updates 00</b>
<blockquote>
    Define here what eggdrop calls 'hourly'. All calls to it, including such things
    as note notifying or userfile saving are affected by this. <br>

    Example:<br><br>

    <b>set hourly-updates 15</b> <br><br>

    Bot will save 15 minutes past every hour its userfile
</blockquote>

<b>set owner "MrLame, MrsLame"</b>
<blockquote>
    Put all permanent owner into this variable
</blockquote>

<b>set default-flags "hp"</b>
<blockquote>
    Enter all flags that new users should get as a default.
</blockquote>

<b><i>set whois-fields "url birthday"</i></b>
<blockquote>
    Enter all user-defined fields that should be displayed in a '.whois'
    This will only be shown if the user has one of these xtra fields.<br>
    You might prefer to comment this out and use the userinfo1.0.tcl script
    which provides commands for changing all of these.
</blockquote>

<b><i>set die-on-sighup 0</i></b>
<blockquote>
    Enable this setting if you want your eggdrop on receiving a SIGHUP.
    Otherwise eggdrop will just rehash.<br>
    Valid settings are 0 for OFF and 1 ON.
</blockquote>

<b><i>set die-on-sigterm 0</i></b>
<blockquote>
    Enable this setting if you want your eggdrop on receiving a SIGTERM.
    Otherwise eggdrop will just save its userfile.<br>
    Valid settings are 0 for OFF and 1 ON.
</blockquote>

<b>set must-be-owner 0</b>
<blockquote>
    If you enable this setting, only permanent owners (owner setting) will be
    able to use .tcl and .set
    moreover if you want only let permanent owners use .dump, then set it to 2
    Valid settings are 0, 1 and 2
</blockquote>

<b><i>set enable-simul 1</i></b>
<blockquote>
    Enable this setting, if you want to enable the 'dccsimul' tcl command<br>
    Valid settings are 0 for OFF and 1 ON.
</blockquote>

<b><i>set allow-dk-cmds 1</i></b>
<blockquote>
    Enable this setting, if you want +d & +k users to use commands bound as -|-<br>
    Valid settings are 0 for OFF and 1 ON.
</blockquote>

<font color="#ff0000">##### MODULES #####</font> <br>
<br>
After those core settings you should start loading up any modules. Modules are
loaded by the command "loadmodule module". Eggdrop looks for modules in the
directory you specified by the module-path setting in the path section. <br>
Documentation and a list of all modules can be found in doc/modules directory<br>
<br>
Please note, that for different configurations different modules are needed.<br>
Four examples:<br>

<ul>Channel Security Bot<br>
Public IRC Bot<br>
Secure Filesys Bot<br>
Limbo Bot<br>
</ul>

<b>Channel Security Bot:</b>
<blockquote>
This bot needs channel, console, dns, irc and if you like ctcp module loaded.
More is not needed and makes the bot slower.
</blockquote>
<b>Public Bot:</b>
<blockquote>
A public bot should have all modules available loaded since they provide all
functions for everybody.
</blockquote>
<b>Secure Filesys Bot:</b>
<blockquote>
This bot needs all normal irc operating modules but not notes, seen, ctcp or
share module.
</blockquote>
<b>Limbo Bot:</b>
<blockquote>
A limbo bot (bot serves as a botnet hub outside irc) just needs channels, console,
dns and maybe notes or share module loaded. Of course blowfist needs to be loaded
here, too.
</blockquote>
<font color="#ff0000">##### SCRIPTS #####</font><br>
<br>
Script section should be placed at the end of the config file. All modules should be
loaded and their variables should be set at this point.<br>
<br>

<b><i>source scripts/script.tcl</i></b>
<blockquote>
    This line loads script.tcl in the scripts directory of your eggdrop. All
    script should be put there, although you can place them where you like as
    long as you can supply a fully qualified path to them.<br>
<br>
    Some commonly loaded scripts are alltools.tcl and action.fix.tcl. The
    aproperiate source lines are:
<br><br>
    <b>source scripts/alltools.tcl<br>
    source scripts/action.fix.tcl</b>
</blockquote>
</blockquote>
</font> 

<p><b><a name="Core"></a></b></p>

<hr>
<b><font face="Arial, Helvetica" color="#FF0000" size="-1">CORE EGGDROP
COMMANDS</font></b>


<p><b><font face="Arial,Helvetica" color="#000000" size="-1">
These are commands provided in the core part of eggdrop, for module
specific commands, select the appropriate link above for the module
you want information
on.</font></b></p>

<p><a name="Core-Output"></a></p>

<hr>
<b><font face="Arial,Helvetica" color="#FF0000" size="-1">OUTPUT
COMMANDS</font></b> 

<p><b><fontcolor="#000000" face="Arial,Helvetica" size="-1">putcmdlog
&lt;text&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">sends text to the log for any
channel, marked as 'command' (c);</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></b></p>

<p><font face="Arial,Helvetica" color="#000000" size="-1"> <b>
putxferlog &lt;text&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">sends text to the log for any
channel, marked as 'file-area' (x)</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></font></b></p>

<p><b><font face="Arial,Helvetica" color="#000000" size="-1">putloglev
&lt;level(s)&gt; &lt;channel&gt; &lt;text&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">sends text to the log, tagged
with all of the valid levels given (use "*" to indicate all log
levels)</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></b></p>

<p><b><font face="Arial,Helvetica" size="-1">dumpfile &lt;nick&gt;
&lt;filename&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">dumps out a file from the
help/text directory to a user on IRC via msg (one line per msg); the
user has no flags, so the flag bindings won't work within the
file.</font></b></p>

<p><b><a name="Core-UserRec"></a></b></p>

<hr>
<b><font face="Arial,Helvetica"><b><font face="Arial, Helvetica"
color="#FF0000" size="-1">USER RECORD MANIPULATION
COMMANDS</font></b></font></b> 

<p><b><font face="Arial, Helvetica" size="-1">
countusers</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: number of users
in the bot's database</font></i></b></p>

<p><b><font face="Arial, Helvetica" size="-1">validuser
&lt;handle&gt;</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: "1" if a user by
that name exists; '0' otherwise</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">finduser
&lt;nick!user@host&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">finds the user record which
most closely matches the given user@host</font><br>
<i><font face="Arial, Helvetica" size="-1">returns: the handle found,
or "*" if none</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">userlist
[flags]</font></b><br>
<font face="Arial, Helvetica" size="-1"><i>returns: a list of the
handles of users on the bot</i> you can use the new flag matching
system here,</font><br>
<font face="Arial, Helvetica" size="-1"><b>usage:</b>
[global]{&mp;mp;mp;/|}[chan]{&mp;mp;mp;/|}[bot]</font><br>
<font face="Arial, Helvetica" size="-1">matches the flags relevantly,
(chan matches vs anywhere), &mp;mp;mp; specifies an and match, |
specifies or, only the first of these is relevant, the default is
or.</font></p>

<p><b><font face="Arial, Helvetica" size="-1">passwdok &lt;handle&gt;
&lt;pass&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">checks the password given
against the user's password -- if the user has not set a password,
will always return "1"; check against the password "" (a blank
string) to find out if a user has no password set</font><br>
<i><font face="Arial, Helvetica" size="-1">returns: "1" if password
matches for that user; "0" if not</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">getuser &lt;handle&gt;
&lt;entry-type&gt; [extra info]</font></b><br>
<font face="Arial, Helvetica" size="-1">this is a generic interface
to the new generic userfile support, it return info specific to each
entry-type, valid entry types are:</font></p>

<blockquote><font face="Arial, Helvetica" size="-1"><b>BOTFL</b> -
returns the current bot-specific flags for the user (if it's a bot
:)</font><br>
<font face="Arial, Helvetica" size="-1"><b>BOTADDR</b> - (another
bot-only thing :) returns a list containing the bots address, the
bots telnet port, and it's relay port.</font><br>
<font face="Arial, Helvetica" size="-1"><b>HOSTS</b> - returns a list
of the host for the user</font><br>
<font face="Arial, Helvetica" size="-1"><b>LASTON</b> - returns a
list containing the unixtime last seen, and the last seen
place.</font><br>
<i><font face="Arial, Helvetica" size="-1">OR</font></i><br>
<font face="Arial, Helvetica" size="-1"><b>LASTON #channel</b>
returns the time last seen on the channel or 0 if no info</font><br>
<font face="Arial, Helvetica" size="-1"><b>INFO</b> - returns the
user's global info line</font><br>
<font face="Arial, Helvetica" size="-1"><b>COMMENT</b> - returns the
master-visible only comment for the user</font><br>
<font face="Arial, Helvetica" size="-1"><b>EMAIL</b> - returns the
users email address</font><br>
<font face="Arial, Helvetica" size="-1"><b>URL</b> - returns the
users url address</font><br>
<font face="Arial, Helvetica" size="-1"><b>XTRA</b> - returns xtra
info, use the form:</font><br>
<b><font face="Arial, Helvetica" size="-1">getuser &lt;handle&gt;
XTRA &lt;key&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">to receive data set for a
certain key</font></blockquote>

<b><font face="Arial, Helvetica" size="-1">setuser &lt;handle&gt;
&lt;entry-type&gt; [extra info]</font></b> <br>
<font face="Arial, Helvetica" size="-1">this is the counterpart of
getuser, it lets you set the various values extra ones not supported
about:</font> 

<blockquote><font face="Arial, Helvetica" size="-1"><b>PASS</b> - use
this to set a users password (no 3rd arg will clear it)</font><br>
<font face="Arial, Helvetica" size="-1"><b>HOSTS</b> - for setting
hosts, no extra info = clear, otherwise <b>*1*</b> hostmask is
added</font><br>
<font face="Arial, Helvetica" size="-1"><b>LASTON</b> - sets global
laston time, will also set laston time for any channel the user has a
chanrec for (if it matches) to prevent setting a channel time from
<b>ALSO</b> setting the global time use <b>LASTON time #channel
*</b></font><br>
<font face="Arial, Helvetica" size="-1"><b>XTRA</b> - in the
form:</font><br>
<b><font face="Arial, Helvetica" size="-1">setuser &lt;handle&gt;
XTRA &lt;key&gt; &lt;data&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">sets upto 500 bytes of data
per key (use no data to clear)</font></blockquote>

<b><font face="Arial, Helvetica" size="-1">chnick &lt;old-handle&gt;
&lt;new-handle&gt;</font></b> <br>
<font face="Arial, Helvetica" size="-1">changes a user's
handle</font> <br>
<i><font face="Arial, Helvetica" size="-1">returns: "1" on success;
"0" if the handle is already used, the handle is invalid, or the user
can't be found</font></i> 

<p><b><font face="Arial, Helvetica" size="-1">chattr &lt;handle&gt;
[changes [channel]]</font></b><br>
<font face="Arial, Helvetica" size="-1">changes the attributes for a
user record, if you include any -- changes are of the form "+f",
"-o", "+dk", "-o+d", etc; if a channel is specified, the
channel-specific flags for that channel are altered you can now use
the +o|-o #channel format here too.</font><br>
<i><font face="Arial, Helvetica" size="-1">returns: new flags for the
user (if you made no changes, returns current flags); if a channel
was specified, the channel-specific flags for that channel are
returned -- returns "*" if that user does not exist</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">matchattr
&lt;handle&gt; &lt;flags&gt; [channel]</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: "1" if the
specified user has the matching flags. (using the new matching
system)</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">adduser &lt;handle&gt;
&lt;hostmask&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">creates a new user entry with
the handle and hostmask given (with no pass- word, and the default
flags)</font><br>
<i><font face="Arial, Helvetica" size="-1">returns: "1" if
successful, "0" if it already existed</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">deluser
&lt;handle&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">attempts to erase a user
record with that handle</font><br>
<i><font face="Arial, Helvetica" size="-1">returns: "1" if
successful, "0" if no such user exists</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">delhost &lt;handle&gt;
&lt;hostmask&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">deletes a hostmask from a
user's hostmask list</font><br>
<i><font face="Arial, Helvetica" size="-1">returns: "1" on success,
"0" if that hostmask wasn't in the list or the user does not
exist</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">newignore
&lt;hostmask&gt; &lt;creator&gt; &lt;comment&gt;
[lifetime]</font></b><br>
<font face="Arial, Helvetica" size="-1">adds an entry to the ignore
list; creator is given credit for the ignore; lifetime is how many
minutes until the ignore expires and is removed; if lifetime is not
specified, ignore-time (usually 60) is used; setting the lifetime to
0 makes it a permanent ignore</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">killignore
&lt;hostmask&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">removes an entry from the
ignore list</font><br>
<i><font face="Arial, Helvetica" size="-1">returns: "1" if
successful, "0" otherwise</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">
ignorelist</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: list of ignores;
each entry is itself a list, containing: hostmask, comment,
expiration timestamp, time added, and creator (the three timestamps
are in unixtime format)</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">isignore
&lt;hostmask&gt;</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: "1" if the ignore
is in the list, "0" otherwise</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">save</font></b><br>
<font face="Arial, Helvetica" size="-1">writes the userfile to
disk</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">reload</font></b><br>
<font face="Arial, Helvetica" size="-1">loads the userfile from disk
(replacing whatever's in memory)</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">backup</font></b><br>
<font face="Arial, Helvetica" size="-1">makes a simple backup of the
userfile that's on disk</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">
getting-users</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: "1" if the bot is
currently downloading a userfile from a sharebot (and hence, user
records are about to drastically change), "0" if not</font></i></p>

<p><a name="Core-Channel"></a></p>

<hr>
<b><font face="Arial, Helvetica" color="#FF0000" size="-1">CHANNEL
COMMANDS</font></b> 

<p><b><font face="Arial, Helvetica" size="-1">channel add
&lt;name&gt; &lt;option-list&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">adds a channel record for the
bot to monitor; the full list of possible options is given in the
"eggdrop.conf.dist" sample config file; note that the channel options
must be in a list (enclosed in {})</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">channel set
&lt;name&gt; &lt;options...&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">sets options for the channel
specified; the full list of possible options is given in the
"eggdrop.conf.dist" sample config file</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">channel info
&lt;name&gt;</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: list of info
about that channel record: enforced mode, idle kick limit, need-op
script, need-invite script, and then various +/- options as seen in
the config file</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">channel remove
&lt;name&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">destroys a channel record for
the bot and makes the bot no longer monitor that channel</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">
savechannels</font></b><br>
<font face="Arial, Helvetica" size="-1">saves the channel settings to
the channel-file if one is defined.</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">
loadchannels</font></b><br>
<font face="Arial, Helvetica" size="-1">reloads the channel settings
from the channel-file if one is defined.</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">channels</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: list of the
channels the bot is monitoring (or trying to)</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">validchan
&lt;channel&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">checks if the bot is
monitoring that channel</font><br>
<i><font face="Arial, Helvetica" size="-1">returns: 1 if the channel
exists, 0 if not</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">isdynamic
&lt;channel&gt;</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: 1 if the channel
is an existing dynamic channel, 0 if not</font></i></p>

<p><a name="Core-DCC"></a></p>

<hr>
<b><font face="Arial, Helvetica" color="#FF0000" size="-1">DCC
COMMANDS</font></b> 

<p><b><font face="Arial, Helvetica" size="-1">putdcc &lt;idx&gt;
&lt;text&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">sends text to the dcc user
indicated</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">dccbroadcast
&lt;message&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">sends your message to
everyone on the party line on the bot net, in the form "***
&lt;message&gt;" for local users, and "*** [Bot] &lt;message&gt;" for
users on other bots</font></p>

<p><b><font face="Arial, Helvetica" size="-1">dccputchan
&lt;channel&gt; &lt;message&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">sends your message to
everyone on a certain channel on the bot net, in a form exactly like
dccbroadcast does -- valid channels are 0 thru 99999</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">restart</font></b><br>
<font face="Arial, Helvetica" size="-1">restarts the bot</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">rehash</font></b><br>
<font face="Arial, Helvetica" size="-1">rehashes the bot</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">dccsimul &lt;idx&gt;
&lt;text...&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">simulates text typed in by
the dcc user specified -- note that in v0.9, this only simulated
commands; now a command must be preceded by a '.' to be
simulated</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">hand2idx
&lt;handle&gt;</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: the idx (a number
greater than or equal to zero) for the user given, if she is on the
party line in chat mode (even if she is currently on a channel or in
chat off), the file area, or in the control of a script; "-1"
otherwise -- if the user is on multiple times, the oldest idx is
returned</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">idx2hand
&lt;idx&gt;</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: handle of the
user with that idx</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">valididx
&lt;idx&gt;</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: "1" if the idx
currently exists; "0" if not</font></i></p>

<p><b><font face="Arial,Helvetica" font size="-1">
botlist</font></b><br>
<i><font face="Arial,Helvetica"><font size="-1">returns: a list of
bots currently on the botnet; each item in the list will be a sublist
with four elements: bot, uplink, version, sharing
status.</font></font></i></p>

<blockquote><i><font face="Arial,Helvetica" size="-1">
bot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : the bot's nickname<br>
uptlink : who the bot is connected through<br>
version : its currentnumeric version<br>
sharing : a "+" if the bot is sharing, "-"
otherwise</font></i></blockquote>

<font face="Arial,Helvetica" size="-1"><b>islinked</b>
&lt;bot&gt;<br>
<i>returns: "1" if thebot is currently linked, "0"
otherwise</font></i>

<p><font face="Arial,Helvetica" size="-1"><b>getchan &lt;idx&gt;</b><br>
<i>returns: the current party line channel for a user on the party line -- "0" indicates he's on
the group party line, "-1" means he has chat off, and a value from 1
to 99999 is a private
channel</font></i></p>

<p><font face="Arial,Helvetica" size="-1"><b>setchan &lt;idx&gt;
&lt;channel&gt;</b><br>
sets a party line user's channel rather suddenly (the party line user is not notified that she
is now on a new channel); a channel name can be used (provided it
exists.<br>
<i>returns: nothing</font></i></p>

<p><font face="Arial, Helvetica" size="-1"><b>console
&lt;idx&gt; [channel] [console-modes]</b><br>
changes a dcc user's consolemode, either to an absolute mode (like "mpj") or just adding/removing
flags (like "+pj" or "-moc" or "+mp-c"); the user's console channel
view can be changed also (as long as the new channel is defined in
the bot)<br>
<i>returns: a list containing
the user's (new) channel view, and (new) console mode, or nothing if
that user isn't currently in dcc chat</font></i></p>

<p><font face="Arial, Helvetica" size="-1"><b>echo &lt;idx&gt;
[status]</b><br>
turns a user's echo on or off; the status has to be a 1 or 0<br>
<i>returns: new value of echo
for that user (or the current value, if status was
omitted)</font></i></p>

<p><font face="Arial, Helvetica" size="-1"><b>killdcc
&lt;idx&gt;</b></font><br>
<font face="Arial, Helvetica" size="-1">kills a party-line or file
area connection, rather abruptly</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">dccused</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: number of dcc
connections currently in use</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">dcclist</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: list of active
dcc connections that are in the chat area, the file area, or a
script; each item in the list will be a sublist with four elements:
idx, nickname, hostname, and type; type will be "chat", "files",
"bot", "file_receiving", "file_sending", "file_send_pending", or
"script" (or "socket" for connections that haven't been put under
'control' yet) or any new dcc type that gets added.</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">getdccidle
&lt;idx&gt;</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: number of seconds
the dcc chat/file system/script user has been idle</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">getdccaway
&lt;idx&gt;</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: away message for
a dcc chat user (or "" if the user is not set away)</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">setdccaway &lt;idx&gt;
&lt;message&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">sets a party line user's away
message and marks them away; if set to "", the user is marked
un-away</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><font face="Arial,Helvetica" font size="-1"><b>connect
&lt;host&gt; &lt;port&gt;<br></b>
makes an outgoing
connection attempt and creates a dcc entry for it; a 'control'
command should be used immediately after a successful 'connect' so no
input is lost<br>
<i>returns: idx of the
new connection</i></font></p>

<p><font face="Arial,Helvetica" size="-1">
<b>listen &lt;port&gt; &lt;type&gt; [options]
[flag]</font></b><br>
<font face="Arial, Helvetica" size="-1">opens a listening port to
accept incoming telnets; type must be one of "bots", "all", "users",
"script", or "off":</font></p>

<p><b><font face="Arial, Helvetica" size="-1">listen &lt;port&gt; bots [mask]</font></b><br>
<font face="Arial, Helvetica" size="-1">accepts connections from bots
only; the optional mask is used to identify permitted bot names; if
the mask begins with '@' it is interpreted to be a mask of permitted
hosts to accept connections from</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: port
#</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">listen &lt;port&gt;
users [mask]</font></b><br>
<font face="Arial, Helvetica" size="-1">accepts connections from
users only (no bots); the optional mask is used to identify permitted
nicknames; if the mask begins with '@' it is interpreted to be a mask
of permitted hosts to accept connections from</font><br>
<i><font face="Arial, Helvetica" size="-1">returns: port
#</font></i></b></p>

<p><b><font face="Arial, Helvetica" size="-1">listen &lt;port&gt; all
[mask]</font></b><br>
<font face="Arial, Helvetica" size="-1">accepts connections from
anyone; the optional mask is used to identify permitted
nicknames/botnames; if the mask begins with '@' it is interpreted to
be a mask of permitted hosts to accept connections from</font><br>
<i><font face="Arial, Helvetica" size="-1">returns: port
#</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">listen &lt;port&gt;
script &lt;proc&gt; [flag]</font></b><br>
<font face="Arial, Helvetica" size="-1">accepts connections which are
immediately routed to a proc; the proc is called with one parameter:
the idx of the new connection flag may currently only be 'pub', which
makes the bot allow anyone to connect.</font><br>
<i><font face="Arial, Helvetica" size="-1">returns: port
#</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">listen &lt;port&gt;
off</font></b><br>
<font face="Arial, Helvetica" size="-1">stop listening at a
port</font><br>
<i><font face="Arial, Helvetica" size="-1">returns:
nothing</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">dccdumpfile &lt;idx&gt;
&lt;filename&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">dumps out a file from the
text directory to a dcc chat user; the flag matching that's used
everywhere else works here too</font></p>

<p><font face="Arial,Helvetica" size="-1"><b>link [via-bot]
&lt;bot&gt;</b></font><br>
<font face="Arial,Helvetica" size="-1">attempts to link to
another bot directly (or, if you give a via-bot, it tells the via-bot
to try</font><br>
<font face="Arial,Helvetica" size="-1"><i>returns: "1" if it
looks okay and it will try; "0" if
not</i></font></p>

<p><b><font face="Arial,Helvetica" size="-1">unlink
&lt;bot&gt;</font></b><br>
<font face="Arial,Helvetica" size="-1">attempts to remove a bot
from the botnet</font><br>
<i><font face="Arial,Helvetica"><font size="-1">returns: "1" if it
will try or has passed the request on; "0" if
not</font></i></p>

<p><b><font face="Arial,Helvetica" size="-1">encrypt &lt;key&gt;
&lt;string&gt;</font></b><br>
<i><font face="Arial,Helvetica" size="-1">returns: encrypted
string (using blowfish), encoded into ascii using base-64 so it can
be sent over the
botnet</font></i></p>

<p><b><font face="Arial,Helvetica" size="-1">decrypt &lt;key&gt;
&lt;encrypted-base64-string&gt;</font></b><br>
<i><font face="Arial,Helvetica" size="-1">returns: decrypted
string (using
blowfish)</font></i></b></p>

<p><b><font face="Arial,Helvetica" size="-1">encpass
&lt;password&gt;</font></b><br>
<i><font face="Arial,Helvetica" size="-1">returns: encrypted
string (using blowfish)</font></i></p>

<p><b><font face="Arial,Helvetica" size="-1">md5
&lt;string&gt;</font></b><br>
<i><font face="Arial,Helvetica" size="-1">returns: the 128 bits
MD5 "message-digest" of the specified string.</font></i></p>

<p><b><font face="Arial,Helvetica"><i><a name="Core-Misc">
</a></i></font></b></p>

<hr>
<b><font face="Arial,Helvetica" color="#FF0000"
size="-1">MISCELLANEOUS COMMANDS</font></b> 

<p><b><font face="Arial,Helvetica" size="-1">bind &lt;type&gt; &lt;attr(s)&gt;
&lt;command-name&gt; [proc-name]</font></b><br>
<font face="Arial, Helvetica" size="-1">adds a new keyword command to
the bot; valid types are listed below; the &lt;attr(s)&gt; are the
flags that a user must have to trigger this command; the
&lt;command-name&gt; for each type is listed below; &lt;proc-name&gt;
is the name of the Tcl procedure to call for this command (see below
for the format of the procedure call); if the proc-name is omitted,
no binding is added -- instead, the current binding is returned (if
it's stackable, a list of the current bindings is returned) yes, you
can use the new flag binding method here too, and this is where it
becomes truely phearful since you may never need to check attr's
inside functions again...imagine:</font></p>

<font face="Arial,Helvetica"size="-1">bind pub -o&+o command
command_proc</font><br>

<font face="Arial,Helvetica" size="-1"><i>returns: name of the command that was added, or (if
proc-name was omitted), a list of the current bindings for this
command</i></font> 

<p><b><font face="Arial,Helvetica" size="-1">unbind &lt;type&gt; &lt;attr(s)&gt; &lt;command-name&gt;
&lt;proc-name&gt;</font></b><br>
<font face="Arial, Helvetica" size="-1">removes a previously-made
binding</font><br>
<i><font face="Arial, Helvetica" size="-1">returns: name of the
command that was removed</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">logfile
[&lt;modes&gt; &lt;channel&gt; &lt;filename&gt;]</font></b><br>
<font face="Arial, Helvetica" size="-1">creates a new logfile, which
will log the modes given for the channel listed -- or, if no logfile
is specified, just returns a list of logfiles; "*" can be used to
mean all channels; you can also change the modes and channel of an
existing logfile with this command -- entering a blank mode and
channel makes the bot stop logging there</font><br>
<i><font face="Arial, Helvetica" size="-1">returns: filename of
logfile created, or (if no logfile is specified) a list of logfiles
like: "{mco * eggdrop.log} {jp #lame lame.log}"</font></i></b></p>

<p><b><font face="Arial, Helvetica" size="-1">maskhost
&lt;nick!user@host&gt;</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: hostmask for the
string given ("n!u@1.2.3.4" -&gt; "*!u@1.2.3.*", "n!u@lame.com" -&gt;
"*!u@lame.com", "n!u@a.b.edu" -&gt; "*!u@*.b.edu")</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">unixtime</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: a long integer
which is the current time according to unix</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">time</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: the current time
in 24-hour format (ie "14:15")</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">strftime
&lt;formatstring&gt; [time]</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: a formatted
string of time using standard strftime format, uses the value of
time, or now if no time specified</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">date</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: the current date
in standard format (ie "21 Dec 1994")</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">ctime
&lt;unixtime&gt;</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: a string of the
date/time represented by the unix time given (i.e. "Fri Aug 3
11:34:55 1973")</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">myip</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: a long number
representing the bot's IP address, as it might appear in (for
example) a DCC request</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">rand
&lt;limit&gt;</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: a random integer
between 0 and limit-1</font></i></p>

<p><b><font face="Arial, Helvetica" size="-1">die
[reason]</font></b><br>
<font face="Arial, Helvetica" size="-1">causes the bot to log a fatal
error and exit completely; if no reason is given, "EXIT" is
used</font></p>

<p><b><font face="Arial, Helvetica" size="-1">unames</font></b><br>
<i><font face="Arial, Helvetica" size="-1">returns: the current
operating system the bot is using.</font></i></p>

<p><a name="Core-GlobalVars"></a></p>

<hr>
<b><font face="Arial, Helvetica" color="#FF0000" size="-1">GLOBAL
VARIABLES:</font></b> <br>
<i><font face="Arial, Helvetica" size="-1">(All config-file variables
are global too, but these variables are set by the bot.)</font></i> 

<p><b><font face="Arial, Helvetica" size="-1">version</font></b><br>
<font face="Arial, Helvetica" size="-1">current bot version (ie:
"1.1.2+pl1 1010201 pl1"); first item is the text version, second item
is a numerical version, and any following items are the names of
patches that have been added</font></p>

<p><b><font face="Arial, Helvetica" size="-1">
numversion</font></b><br>
<font face="Arial, Helvetica" size="-1">current numeric bot version
(ie: "1010201");</font></p>

<blockquote><font face="Arial, Helvetica" size="-1">Numerical version
is "MMNNRRPP" where:</font> 

<blockquote><font face="Arial, Helvetica" size="-1">MM is the major
release number</font><br>
<font face="Arial, Helvetica" size="-1">NN is the minor release
number</font><br>
<font face="Arial, Helvetica" size="-1">RR is the sub-release
number</font><br>
<font face="Arial, Helvetica" size="-1">PP is the patch level for
that sub-release</font></blockquote>
</blockquote>

<b><font face="Arial, Helvetica" size="-1">uptime</font></b> <br>
<font face="Arial, Helvetica" size="-1">unixtime value for when the
bot was started</font> 

<p><b><font face="Arial, Helvetica" size="-1">lastbind</font></b><br>
<font face="Arial, Helvetica" size="-1">The last command binding
which triggered. This allows you to identify which command triggered
a tcl routine.</font></p>

<p><a name="Core-CommandExt"></a></p>

<hr>
<b><font face="Arial, Helvetica" color="#FF0000" size="-1">COMMAND
EXTENSION</font></b> 

<p><font face="Arial, Helvetica" size="-1">You can use the 'bind'
command to attach Tcl procedures to certain events. For example, you
can write a Tcl procedure that gets called every time a user says
"danger" on the channel. The following is a list of the types of
bindings, and how they work. Under each binding type is the format of
the bind command, the list of arguments sent to the Tcl proc, and an
explanation.</font></p>

<p><font face="Arial, Helvetica" size="-1">Some bindings are marked
as "stackable". That means that you can bind multiple commands to the
same trigger. Normally, for example, a binding of "bind msg - stop
msg_stop" (which makes a msg-command "stop" call the Tcl proc
"msg_stop") will overwrite any previous binding you had for the
msg-command "stop". With stackable bindings, like 'msgm' for example,
you can bind to the same command or mask again and again. When the
binding is triggered, ALL the Tcl procs that are bound to it will be
called, one after another.</font></p>

<p><font face="Arial, Helvetica" size="-1">To remove a binding, use
"unbind". For example, to remove that binding for the msg-command
"stop", use "unbind msg - stop msg_stop".</font></p>

<p><font face="Arial, Helvetica" size="-1">There are more bindings
which are enabled from the loading of specific modules, see the
specific module information pages to see which module provides which
bindings.</font></p>

<p><b><font face="Arial, Helvetica" size="-1">DCC</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind dcc
&lt;flags&gt; &lt;command&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;handle&gt;
&lt;idx&gt; &lt;args&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">used for commands from a dcc
chat on the party line; as in MSG, the command is the first word and
everything else is the argument string; the idx is valid until the
user disconnects; after that it may be reused, so be careful about
storing an idx for long periods of time</font> 

<p><b><font face="Arial, Helvetica" size="-1">BOT</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind bot
&lt;flags&gt; &lt;command&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;from-bot&gt;
&lt;command&gt; &lt;args&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">triggered by a message coming
from another bot in the botnet; works similar to a DCC binding; the
first word is the command and the rest becomes the argument string;
flags are ignored</font> 

<p><b><font face="Arial, Helvetica" size="-1">CHON
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind chon
&lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;handle&gt;
&lt;idx&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">when someone first enters the
"party-line" area of the bot via dcc chat or telnet, this is
triggered before they are connected to a chat channel (so yes, you
can change the channel in a 'chon' proc); mask matches against
handle; this is NOT triggered when someone returns from the file
area, etc</font> 

<p><b><font face="Arial, Helvetica" size="-1">CHOF
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind chof
&lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;handle&gt;
&lt;idx&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">triggered when someone leaves
the party line to disconnect from the bot; mask matches against the
handle; note that the connection may have already been dropped by the
user, so don't send output to that idx</font> 

<p><b><font face="Arial, Helvetica" size="-1">CHAT
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind chat
&lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;nick&gt;
&lt;channel#&gt; &lt;text&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">when someone says something
on the botnet, it invokes this binding; flags is ignored; nick could
be a user on this bot (i.e. "DronePup") or on another bot (i.e.
"Eden@Wilde"); the mask is checked against the text</font> 

<p><b><font face="Arial, Helvetica" size="-1">LINK
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind link
&lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;botname&gt;
&lt;via&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">triggered when a bot links
into the botnet; botname is the name of the bot that just linked in;
via is the bot it linked through; the mask is checked against the bot
that linked; flags is ignored</font> 

<p><b><font face="Arial, Helvetica" size="-1">DISC
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind disc
&lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name
&lt;botname&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">triggered when a bot
disconnects from the botnet for whatever reason; just like the link
bind, flags are ignored; mask is checked against the nickname of the
bot that left</font> 

<p><b><font face="Arial, Helvetica" size="-1">FILT
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind filt
&lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;idx&gt;
&lt;text&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">DCC party line and file
system users have their text sent through filt before being
processed; if the proc a blank string, the text is considered parsed;
otherwise the bot will use the text returned from the proc and
continue parsing that</font> 

<p><b><font face="Arial, Helvetica" size="-1">ACT
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind act
&lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;nick&gt;
&lt;channel#&gt; &lt;action&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">when someone does an action
on the botnet, it invokes this binding; flags is ignored; the mask is
checked against the text of the action (this is very similar to the
CHAT binding)</font> 

<p><b><font face="Arial, Helvetica" size="-1">BCST
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind chat
&lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;bot&gt;
&lt;channel#&gt; &lt;text&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">when a bot says something on
the botnet, it invokes this binding; flags is ignored; the mask is
checked against the text</font> 

<p><b><font face="Arial, Helvetica" size="-1">CHJN
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind chat
&lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;bot&gt;
&lt;nick&gt; &lt;channel#&gt; &lt;flag&gt;&lt;sock&gt;
&lt;from&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">when someone joins a botnet
channel, it invokes this binding; flags is ignored; the mask is
checked against the text</font> 

<p><b><font face="Arial, Helvetica" size="-1">CHPT
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind chat
&lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;bot&gt;
&lt;nick&gt; &lt;sock&gt; &lt;chan&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">when someone parts a botnet
channel, it invokes this binding; flags is ignored; the mask is
checked against the channel</font> 

<p><b><font face="Arial, Helvetica" size="-1">TIME
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind time -
&lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;min&gt;
&lt;hour&gt; &lt;day&gt; &lt;month&gt;
&lt;year&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">allows you to schedule
procedure calls at certain times, mask matches 5 space seperated
integers of the form: "min hour day month year"</font> 

<p><b><font face="Arial, Helvetica" size="-1">AWAY
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind away -
&lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;bot&gt;
&lt;idx&gt; &lt;msg&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">triggers when a user goes
away or comes back on the botnet (msg == "" when returning)</font> 

<p><b><font face="Arial, Helvetica" size="-1">LOAD
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind load -
&lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name
&lt;module&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">triggers when a module is
loaded.</font> 

<p><b><font face="Arial, Helvetica" size="-1">UNLD
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind unld -
&lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name
&lt;module&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">triggers when a module is
unloaded.</font> 

<p><b><font face="Arial, Helvetica" size="-1">NKCH
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind nkch -
&lt;mask&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name &lt;oldnick&gt;
&lt;newnick&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">triggered whenever a local
users nick is changed (in the userfile)</font> 

<p><b><font face="Arial, Helvetica" size="-1">EVNT&nbsp;&nbsp;
(stackable)</font></b></p>

<blockquote><font face="Arial, Helvetica" size="-1">bind evnt -
&lt;type&gt; &lt;proc&gt;</font><br>
<font face="Arial, Helvetica" size="-1">proc-name
&lt;type&gt;</font></blockquote>

<font face="Arial, Helvetica" size="-1">triggered whenever one of
these events happens. valid events are:</font> <br>
<font face="Arial, Helvetica" size=
"-1">sighup&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(called on a kill -HUP &lt;pid&gt;)</font> <br>
<font face="Arial, Helvetica" size=
"-1">sigterm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(called on a kill -TERM &lt;pid&gt;)</font> <br>
<font face="Arial, Helvetica" size=
"-1">sigill&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(called on a kill -ILL &lt;pid&gt;)</font> <br>
<font face="Arial, Helvetica" size=
"-1">sigquit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(called on a kill -QUIT &lt;pid&gt;)</font> <br>
<font face="Arial, Helvetica" size=
"-1">save&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(called when the userfile is saved)</font> <br>
<font face="Arial, Helvetica" size=
"-1">rehash&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(called just after a rehash)</font> <br>
<font face="Arial, Helvetica" size=
"-1">prerehash&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(called just before a rehash)</font> <br>
<font face="Arial, Helvetica" size=
"-1">logfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(called when the logs are switched daily)</font> 

<p><a name="Core-ReturnV"></a></p>

<hr>
<b><font face="Arial, Helvetica" color="#FF0000" size="-1">RETURN
VALUES</font></b> 

<p><font face="Arial, Helvetica" size="-1">Several bindings pay
attention to the value you return from the proc (using "return
$value"). Usually they expect a 0 or 1, and failing to return any
value is interpreted as a 0.</font></p>

<p><font face="Arial, Helvetica" size="-1">Here's a list of the
bindings that use the return value from procs they trigger, these
bindings are mostly enabled from the loading of specific modules, see
the specific module information pages to see which module provides
which bindings.</font></p>

<p><b><font face="Arial, Helvetica" size="-1">MSG</font></b><br>
<font face="Arial, Helvetica" size="-1">Return 1 to make the command
get logged like so:</font><br>
<font face="Arial, Helvetica" size="-1">(nick!user@host) !handle!
command</font></p>

<p><b><font face="Arial, Helvetica" size="-1">DCC</font></b><br>
<font face="Arial, Helvetica" size="-1">Return 1 to make the command
get logged like so:</font><br>
<font face="Arial, Helvetica" size="-1">#handle# command</font></p>

<p><b><font face="Arial, Helvetica" size="-1">FIL</font></b><br>
<font face="Arial, Helvetica" size="-1">Return 1 to make the command
get logged like so:</font><br>
<font face="Arial, Helvetica" size="-1">#handle# files:
command</font></p>

<p><b><font face="Arial, Helvetica" size="-1">PUB</font></b><br>
<font face="Arial, Helvetica" size="-1">Return 1 to make the command
get logged like so:</font><br>
<font face="Arial, Helvetica" size="-1">&lt;&lt;nick&gt;&gt; !handle!
command</font></p>

<p><b><font face="Arial, Helvetica" size="-1">CTCP</font></b><br>
<font face="Arial, Helvetica" size="-1">Return 1 to ask the bot not
to process the CTCP command on its own. Otherwise it would send its
own response to the CTCP (possibly an error message if it doesn't
know how to deal with it).</font></p>

<p><b><font face="Arial, Helvetica" size="-1">FILT</font></b><br>
<font face="Arial, Helvetica" size="-1">Return 1 to indicate the text
has been processed, and the bot should just ignore it. Otherwise it
will treat the text like any other.</font></p>

<p><b><font face="Arial, Helvetica" size="-1">FLUD</font></b><br>
<font face="Arial, Helvetica" size="-1">Return 1 to ask the bot not
to take action on the flood. Otherwise it will do its normal
punishment.</font></p>

<p><b><font face="Arial, Helvetica" size="-1">RAW</font></b><br>
<font face="Arial, Helvetica" size="-1">Return 1 to ask the bot not
to process the server text. This can affect the bot's performance (by
causing it to miss things that it would normally act on) -- you have
been warned.</font></p>

<p><b><font face="Arial, Helvetica" size="-1">WALL</font></b><br>
<font face="Arial, Helvetica" size="-1">Return 1 to make the command
get logged liked so:</font><br>
<font face="Arial, Helvetica" size="-1">!nick! msg</font></p>

<p><a name="Core-Match"></a></p>

<hr>
<b><font face="Arial, Helvetica" color="#FF0000" size="-1">MATCH
CHARACTERS</font></b> 

<p><font face="Arial, Helvetica" size="-1">Many of the bindings allow
match characters in the arguments. Here are the four special
characters:</font></p>

<blockquote><font face="Arial, Helvetica" size="-1">? matches any
single character</font><br>
<font face="Arial, Helvetica" size="-1">* matches 0 or more
characters of any type</font><br>
<font face="Arial, Helvetica" size="-1">% matches 0 or more non-space
characters (can be used to match a single word)</font><br>
<font face="Arial, Helvetica" size="-1">~ matches 1 or more space
characters (can be used for whitespace between
words)</font></blockquote>

<hr>
<i><font face="Arial, Helvetica" size="-1">&copy; 1997 Robey
Pointer</font></i> <br>
<i><font face="Arial, Helvetica" size="-1">&copy; 1999,2000 Eggheads
Development Team</font></i>
</body>
</html>

